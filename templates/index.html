<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Katugunda Foundation</title>
    <!-- Bootstrap CSS for Modern Layouts -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <!-- AOS for Scroll Animations -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
html {
    scroll-behavior: smooth;
}


/* Logo styling */
.logo-container {
    margin-bottom: 30px; /* Add space between the logo and links */
}

.header-logo {
    width: 200px;
    height: auto;
}

/* Navbar styling for stacking logo and links */
.navbar {
    display: flex;
    flex-direction: column; /* Stack elements vertically */
    align-items: flex-start; /* Align items to the left */
    padding: 10px;
    background-color: #333;
    color: white;
}


/* Navbar links styling */
.navbar-links {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
}

.navbar-links a {
    color: white;
    padding: 5px 10px;
    text-decoration: none;
    font-weight: bold;
    transition: background-color 0.3s;
}

.navbar-links a:hover {
    background-color: #555;
}



.navbar a {
    color: white;
    padding: 5px 10px;
    text-decoration: none;
    font-weight: bold;
    transition: background-color 0.3s;
}

.navbar a:hover {
    background-color: #555;
}

.page-heading {
    background-color: #f8f9fa;
    text-align: center;
    padding: 50px 0;
}

.content-section {
    padding: 60px 20px;
    background: #f1f1f1;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.section-image {
    width: 100%;
    height: auto;
    border-radius: 10px;
}

.text {
    max-width: 800px;
    margin: 20px auto;
}

h2,
.section-heading {
    font-size: 2.5em;
    font-weight: bold;
    margin: 60px 0 30px;
    text-align: center;
}

p {
    font-size: 1.1em;
    line-height: 1.6em;
    margin-bottom: 15px;
}

.buttons-container .button {
    background-color: #4CAF50;
    border: none;
    color: white;
    padding: 10px 20px;
    margin: 5px;
    transition: background-color 0.3s, transform 0.3s;
}

.buttons-container .button:hover {
    background-color: #45a049;
    transform: scale(1.05);
}

.footer {
    background-color: #333;
    color: white;
    padding: 20px;
    text-align: center;
}

.footer a {
    color: #ffcc00;
    text-decoration: none;
    margin: 0 5px;
    font-weight: bold;
}

.footer a:hover {
    color: #ffffff;
}

.flex-container {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
}

.parallax {
    background-image: url("{{ url_for('static', filename='pic15.jpg') }}");
    height: 400px;
    background-attachment: fixed;
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    margin-bottom: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
}

.text p {
    font-size: 1.2em;
    line-height: 1.8em;
    color: #333;
}

/* Slide-in effect */
.slide-in {
    opacity: 0;
    transform: translateY(100px);
    transition: opacity 1.5s ease-out, transform 1.5s ease-out;
}

.slide-in.show {
    opacity: 1;
    transform: translateY(0);
}

.menu-toggle {
    display: none;
    color: white;
    font-size: 1.5em;
    cursor: pointer;
    align-self: flex-end; /* Align the menu icon to the right */
}

/* Responsive design adjustments */
@media only screen and (max-width: 768px) {
    .header-logo {
        width: 150px; /* Adjust logo size for mobile */
    }

    .content-section {
        padding: 40px 15px;
    }

    h2,
    .section-heading {
        font-size: 2em;
    }

   .navbar {
        align-items: center;
    }

    .navbar-links {
        display: none;
        flex-direction: column;
        gap: 10px;
        text-align: left; /* Align links to the left on mobile */
        width: 100%;
    }

    .navbar-links.show {
        display: flex; /* Show links when toggled */
    }

    .menu-toggle {
        display: block; /* Show the menu icon on mobile */
    }
}

@media only screen and (max-width: 480px) {
    .header-logo {
        width: 100px;
    }

    .page-heading {
        padding: 30px 0;
    }

    .content-section {
        padding: 30px 10px;
    }

    h2,
    .section-heading {
        font-size: 1.5em;
    }

    p {
        font-size: 1em;
    }

    .buttons-container .button {
        padding: 8px 16px;
        margin: 3px;
    }

    .parallax {
        height: 200px;
    }

    .navbar a {
        padding: 6px;
        margin: 2px 0;
        width: 100%;
        text-align: center;
    }
}

    /* Error message styling */
    .error-message {
        color: red;
        font-size: 0.9em;
        font-weight: bold;
        margin-top: 5px;
    }

   /* Modal background overlay */
   .modal {
        display: none; /* Hidden by default */
        position: fixed;
        z-index: 1000; /* Ensures it appears above other content */
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black background */
    }

    /* Modal content box */
    .modal-content {
        background-color: white;
        color: black;
        padding: 20px;
        border-radius: 8px;
        width: 80%;
        max-width: 400px;
        margin: auto;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%); /* Center the modal */
        text-align: center;
    }



.gallery-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* Create 4 equal columns */
    grid-template-rows: repeat(2, auto); /* Create 2 rows */
    gap: 20px; /* Add space between images */
    padding: 20px 0;
}

.gallery-image {
    width: 100%; /* Each image takes up the full width of the grid cell */
    height: 200px; /* Set a fixed height for uniformity */
    object-fit: cover; /* Crop the image to fit the width and height without distorting */
    border-radius: 8px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.gallery-image:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
}


/* Overlay for background dimming */
#formOverlay {
    display: none; /* Hidden by default */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black */
    z-index: 999; /* Below the form */
}

/* Centered donation form */
#donationForm {
    display: none; /* Hidden by default */
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* Center it horizontally and vertically */
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
    z-index: 1000; /* Ensure it appears above everything else */
    max-width: 400px;
    width: 90%; /* Responsive width */
}


</style>

</head>

<body>

<div class="navbar">
    <div class="logo-container">
        <img src="{{ url_for('static', filename='logo1.jpg') }}" alt="Katugunda Foundation Logo" class="header-logo">
    </div>
    <div class="navbar-links">
        <a href="#home">Home</a>
        <a href="#about">About the Foundation</a>
        <a href="#projects">Projects</a>
        <a href="#ways-to-help">Ways To Help</a>
        <a href="#contact">Contact Us</a>
        <a href="javascript:void(0)" class="button give" onclick="openDonationForm()">GIVE NOW</a>
    </div>
</div>

    <!-- Home Section -->
    <div id="home" class="page-heading" data-aos="fade-up">
        <h1>Katugunda Foundation</h1>
    </div>

    <div class="parallax"></div>

    <!-- About Section -->
    <div id="about" class="content-section flex-container slide-in">
        <h2 class="section-heading">ABOUT US</h2>
        <div class="text">
            <p>The Katugunda Foundation was founded to provide assistance to the underprivileged in Kazo district, Uganda.</p>
            <p>Our initiatives focus on children, orphans, women, the disabled, and the poor, aiming to create a sustainable future where everyone can thrive.</p>
            <p>We believe that God uses people to do His work, and Katugunda Foundation is proud to be the hands for God, addressing the needs of the most vulnerable.</p>
            <p>Join us in our mission to uplift lives and create a brighter tomorrow.</p>
        </div>
    </div>

  <!-- Vision Section -->
<div id="vision" class="content-section flex-container slide-in">
    <h2>VISION</h2>
    <div class="text">
        <p>The vision of Katugunda Foundation is to see thriving communities where everyone is living to their God-given potential and living a life of dignity.</p>
    </div>
</div>

<!-- Mission Section -->
<div id="mission" class="content-section flex-container slide-in">
    <h2>MISSION</h2>
    <div class="text">
        <p>Our mission is to meet the needs of the underprivileged in our communities.</p>
        <p>Our collaboration with individuals, churches, and businesses forms the backbone of our mission, enabling us to meet the urgent needs of the vulnerable and to sow the seeds of community development.</p>
    </div>
</div>


<!-- Gallery Section -->
<div id="gallery" class="content-section flex-container slide-in">
    <h2 class="section-heading">CHANGING LIVES</h2>
    <div class="gallery-grid">
        <img src="{{ url_for('static', filename='pic10.jpg') }}" alt="Gallery Image 1" class="gallery-image">
        <img src="{{ url_for('static', filename='pic11.jpg') }}" alt="Gallery Image 2" class="gallery-image">
        <img src="{{ url_for('static', filename='pic12.jpg') }}" alt="Gallery Image 3" class="gallery-image">
        <img src="{{ url_for('static', filename='pic13.jpg') }}" alt="Gallery Image 4" class="gallery-image">
        <img src="{{ url_for('static', filename='pic14.jpg') }}" alt="Gallery Image 5" class="gallery-image">
        <img src="{{ url_for('static', filename='pic16.jpg') }}" alt="Gallery Image 6" class="gallery-image">
        <img src="{{ url_for('static', filename='pic17.jpg') }}" alt="Gallery Image 6" class="gallery-image">
        <img src="{{ url_for('static', filename='pic18.jpg') }}" alt="Gallery Image 6" class="gallery-image">

    </div>
</div>


    <!-- Projects Section -->
    <div id="projects" class="content-section slide-in">
        <h2>PROJECTS: OUR WORK</h2>
        <div class="text">
            <p>Our initiatives range from immediate relief efforts to long-term development programs, all designed with the well-being of the Kazo district's most vulnerable in mind.</p>
            <p>Whether it's providing access to essential services, empowering through education, or fostering economic opportunities, we are there, working on the ground, making a tangible difference.</p>
        </div>
    </div>

    <!-- Ways to Help Section -->
    <div id="ways-to-help" class="content-section slide-in">
        <h2>JOIN US</h2>
        <div class="text">
            <p>Your support is the cornerstone of change.</p>
            <p>Together, we can lift spirits and elevate lives, paving the way for a future filled with hope and prosperity.</p>
            <p>Every contribution, whether time, resources, or funds, is a step toward a brighter tomorrow.</p>
        </div>

       <!-- Donate Today Section -->
<div id="donate-today" class="content-section flex-container slide-in">
    <h2>DONATE TODAY</h2>
    <div class="text">
        <p>Your generosity can transform lives.</p>
        <p>Embrace the spirit of giving by supporting the Katugunda Foundation.</p>
        <p>Join us in our mission to uplift the underprivileged and to light the way to a more compassionate, thriving world.</p>
    </div>
</div>

    <!-- Contact Us Section -->
    <div id="contact" class="content-section slide-in">
        <h2>CONTACT US</h2>
        <p>Email: <a href="mailto:stephen.akandwanaho@gmail.com">stephen.akandwanaho@gmail.com</a></p>
        <p>Phone: +256 782 156 066</p>
    </div>

<footer class="footer">
    <div>
        <a href="#home">Home</a>
        <a href="#about">About Us</a>
        <a href="#projects">Projects</a>
        <a href="#ways-to-help">Ways To Help</a>
        <a href="#contact">Contact</a>
        <a href="{{ url_for('donations') }}">Donations List</a>

        <!-- Error message for restricted access -->
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <div class="error-message">
                    <p>{{ messages[0] }}</p>
                </div>
            {% endif %}
        {% endwith %}
    </div>
    <div class="address">
        <p style="color: white; font-size: 0.8em;">&copy; 2024 Katugunda Foundation</p>
    </div>
    </footer>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>



<!-- Form Overlay -->
<div id="formOverlay" onclick="closeDonationForm()"></div>

<!-- Centered Donation Form -->
<div id="donationForm">
    <h2>Donation Form</h2>
    <form id="donateForm">
        <label for="name">Name:</label><br>
        <input type="text" id="name" name="name" required>
        <small id="nameError" style="color: red; display: none;">Name must contain only letters and spaces.</small><br><br>

        <label for="country">Country:</label><br>
        <input type="text" id="country" name="country" required>
        <small id="countryError" style="color: red; display: none;">Country must contain only letters and spaces.</small><br><br>

        <label for="email">Email Address:</label><br>
        <input type="email" id="email" name="email" required>
        <small id="emailError" style="color: red; display: none;">Please enter a valid email address.</small><br><br>

        <label for="phone">Phone Number:</label><br>
        <input type="tel" id="phone" name="phone" required>
        <small id="phoneError" style="color: red; display: none;">Phone number must contain only digits.</small><br><br>

        <label for="amount">Donation Amount:</label><br>
        <input type="text" id="amount" name="amount" required>
        <small id="amountError" style="color: red; display: none;">Please enter a valid donation amount.</small><br><br>

        <!-- Submit and Clear Buttons -->
        <button type="submit">Submit</button>
        <button type="button" onclick="clearForm()">Clear</button>
        <button type="button" onclick="closeDonationForm()">Close</button>
    </form>
</div>

<script>
    AOS.init(); // Initialize AOS for scroll animations

    // Background Image Rotation
    var images = [
        "{{ url_for('static', filename='pic10.jpg') }}",
        "{{ url_for('static', filename='pic11.jpg') }}",
        "{{ url_for('static', filename='pic12.jpg') }}",
        "{{ url_for('static', filename='pic13.jpg') }}",
        "{{ url_for('static', filename='pic14.jpg') }}",
        "{{ url_for('static', filename='pic15.jpg') }}"
    ];

    function changeBackground() {
        var currentIndex = 0;
        setInterval(function () {
            document.body.style.backgroundImage = "linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)), url('" + images[currentIndex] + "')";
            currentIndex = (currentIndex + 1) % images.length;
        }, 5000); // Change background every 5 seconds
    }

    window.onload = changeBackground;

    // Slide-In Animation with re-trigger effect
    const slideInElements = document.querySelectorAll('.slide-in');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('show'); // Add the class when entering the viewport
            } else {
                entry.target.classList.remove('show'); // Remove the class when leaving the viewport
            }
        });
    }, { threshold: 0.15 }); // Trigger before the section fully appears for a smoother effect

    slideInElements.forEach(element => observer.observe(element));

    // Form Functions and Validation
    document.getElementById("donateForm").addEventListener("submit", function(event) {
        event.preventDefault();
        let isValid = true;
        isValid &= validateName();
        isValid &= validateCountry();
        isValid &= validateEmail();
        isValid &= validatePhone();
        isValid &= validateAmount();

        if (isValid) {
            // Gather form data with date
            const donationDetails = {
                name: document.getElementById("name").value,
                country: document.getElementById("country").value,
                email: document.getElementById("email").value,
                phone: document.getElementById("phone").value,
                amount: document.getElementById("amount").value,
                date: new Date().toLocaleDateString()  // Save the current date
            };

            // Save donation details to localStorage
            let donations = JSON.parse(localStorage.getItem("donations")) || [];
            donations.push(donationDetails);
            localStorage.setItem("donations", JSON.stringify(donations));

            // Display thank-you message
            const donationForm = document.getElementById("donationForm");
            donationForm.innerHTML = "<h2 style='color: green; text-align: center;'>Thank you for your donation. God bless you!</h2>";

            // Hide the message after 3 seconds
            setTimeout(() => {
                closeDonationForm();
                window.location.href = "#home";  // Redirect to home section
            }, 3000);
        }
    });

    function validateName() {
        const name = document.getElementById("name").value;
        const nameError = document.getElementById("nameError");
        const textPattern = /^[A-Za-z\s]+$/;
        if (!textPattern.test(name)) { nameError.style.display = "block"; return false; }
        else { nameError.style.display = "none"; return true; }
    }

    function validateCountry() {
        const country = document.getElementById("country").value;
        const countryError = document.getElementById("countryError");
        const textPattern = /^[A-Za-z\s]+$/;
        if (!textPattern.test(country)) { countryError.style.display = "block"; return false; }
        else { countryError.style.display = "none"; return true; }
    }

    function validateEmail() {
        const email = document.getElementById("email");
        const emailError = document.getElementById("emailError");
        if (!email.checkValidity()) { emailError.style.display = "block"; return false; }
        else { emailError.style.display = "none"; return true; }
    }

    function validatePhone() {
        const phone = document.getElementById("phone").value;
        const phoneError = document.getElementById("phoneError");
        const phonePattern = /^\d+$/;
        if (!phonePattern.test(phone)) { phoneError.style.display = "block"; return false; }
        else { phoneError.style.display = "none"; return true; }
    }

    function validateAmount() {
        const amount = document.getElementById("amount").value;
        const amountError = document.getElementById("amountError");
        if (amount.trim() === "") { amountError.style.display = "block"; return false; }
        else { amountError.style.display = "none"; return true; }
    }

    document.getElementById("name").addEventListener("input", validateName);
    document.getElementById("country").addEventListener("input", validateCountry);
    document.getElementById("email").addEventListener("input", validateEmail);
    document.getElementById("phone").addEventListener("input", validatePhone);
    document.getElementById("amount").addEventListener("input", validateAmount);

function openDonationForm() {
    document.getElementById("formOverlay").style.display = "block";
    document.getElementById("donationForm").style.display = "block";

    // Ensure the form scrolls into view without adjusting page scroll
    document.getElementById("donationForm").scrollIntoView({
        behavior: "smooth",
        block: "center",
        inline: "center"
    });
}

function closeDonationForm() {
    document.getElementById("formOverlay").style.display = "none";
    document.getElementById("donationForm").style.display = "none";
}

    function clearForm() {
        document.getElementById("donateForm").reset();
        hideErrors();
    }

    function hideErrors() {
        document.getElementById("nameError").style.display = "none";
        document.getElementById("countryError").style.display = "none";
        document.getElementById("emailError").style.display = "none";
        document.getElementById("phoneError").style.display = "none";
        document.getElementById("amountError").style.display = "none";
    }

    // Modal display functions
    function showErrorModal() {
        document.getElementById("errorModal").style.display = "block";
    }

    function closeErrorModal() {
        document.getElementById("errorModal").style.display = "none";
    }

    function toggleMenu() {
    document.querySelector('.navbar-links').classList.toggle('show');
}


</script>

<!-- Set a JavaScript variable for flash message existence -->
{% with messages = get_flashed_messages() %}
    {% if messages %}
        <script>
            document.addEventListener("DOMContentLoaded", showErrorModal);
        </script>
    {% endif %}
{% endwith %}

<!-- Error Message Modal -->
<div id="errorModal" class="modal">
    <div class="modal-content">
        <p id="errorText">Sorry, this information is restricted.</p>
        <button onclick="closeErrorModal()">Close</button>
    </div>
</div>

</body>
</html>
